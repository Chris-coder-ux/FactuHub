# ============================================
# FacturaHub - Variables de Entorno
# ============================================
# 
# INSTRUCCIONES:
# 1. Copia este archivo a .env.local: cp .env.example .env.local
# 2. Completa las variables requeridas (marcadas con [REQUERIDO])
# 3. Configura las opcionales según necesites
# 4. NUNCA commitees .env.local al repositorio
#
# ============================================

# ============================================
# [REQUERIDO] Base de Datos MongoDB
# ============================================
# MongoDB local:
MONGODB_URI=mongodb://localhost:27017/facturahub
# O MongoDB Atlas:
# MONGODB_URI=mongodb+srv://usuario:password@cluster.mongodb.net/facturahub?retryWrites=true&w=majority

# MongoDB Read Replicas (Opcional - Para mejorar performance de analytics)
# MONGODB_USE_READ_REPLICAS=true
# MONGODB_READ_REPLICA_URI=mongodb+srv://usuario:password@cluster-replica.mongodb.net/facturahub?readPreference=secondaryPreferred

# ============================================
# [REQUERIDO] Autenticación NextAuth
# ============================================
# Genera un secreto seguro con: openssl rand -base64 32
# O con Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
NEXTAUTH_SECRET=genera-un-secreto-aleatorio-minimo-32-caracteres-aqui
NEXTAUTH_URL=http://localhost:3000

# ============================================
# [REQUERIDO] Encriptación de Datos Sensibles
# ============================================
# Genera una clave de 64 caracteres hex con: openssl rand -hex 32
ENCRYPTION_KEY=genera-una-clave-de-64-caracteres-hex-aqui

# ============================================
# Redis - Cache y Colas (Opcional pero Recomendado)
# ============================================
# Opción 1: URL completa (Recomendado)
# Redis local:
REDIS_URL=redis://localhost:6379
# Upstash (con TLS):
# REDIS_URL=rediss://default:password@xxx.upstash.io:6379

# Opción 2: Variables individuales
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_TLS=false

# Opción 3: Upstash REST API (para cache distribuido)
# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxx

# ============================================
# Stripe - Pagos (Opcional)
# ============================================
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ============================================
# SendGrid - Emails (Opcional)
# ============================================
SENDGRID_API_KEY=SG.xxx...
EMAIL_FROM=noreply@example.com

# ============================================
# Sentry - Monitoring (Opcional)
# ============================================
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
NEXT_PUBLIC_SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_ORG=tu-org
SENTRY_PROJECT=facturahub
SENTRY_AUTH_TOKEN=xxx

# ============================================
# Cloudinary - Almacenamiento de Imágenes (Opcional)
# ============================================
CLOUDINARY_CLOUD_NAME=xxx
CLOUDINARY_API_KEY=xxx
CLOUDINARY_API_SECRET=xxx

# ============================================
# Google Cloud Vision - OCR Avanzado (Opcional)
# ============================================
GOOGLE_CLOUD_PROJECT=tu-project-id-gcp
GOOGLE_APPLICATION_CREDENTIALS=./ruta/a/service-account-key.json
USE_VISION_OCR=false

# ============================================
# VeriFactu - Cumplimiento AEAT España (Opcional)
# ============================================
VERIFACTU_ENABLED=false
VERIFACTU_ENVIRONMENT=sandbox
VERIFACTU_AUTO_SEND=false
VERIFACTU_AUTO_ENABLE_FOR_SPAIN=true
# VERIFACTU_CERTIFICATE_PATH=/path/to/certificate.p12
# VERIFACTU_CERTIFICATE_PASSWORD=tu-password-certificado
# VERIFACTU_CHAIN_HASH=hash-inicial-para-chain

# ============================================
# Certificate Pinning - Seguridad (Opcional)
# ============================================
# Para proteger comunicaciones con APIs externas
# Usa: npm run cert:extract <hostname> para obtener fingerprints
# AEAT_PRODUCTION_CERT_FINGERPRINT="FINGERPRINT1,FINGERPRINT2"
# AEAT_SANDBOX_CERT_FINGERPRINT="FINGERPRINT1,FINGERPRINT2"
# BBVA_PRODUCTION_CERT_FINGERPRINT="FINGERPRINT1,FINGERPRINT2"
# BBVA_SANDBOX_CERT_FINGERPRINT="FINGERPRINT1,FINGERPRINT2"

# ============================================
# Cron Jobs - Tareas Programadas (Opcional)
# ============================================
# Genera un secreto seguro con: openssl rand -base64 32
CRON_SECRET=genera-un-secreto-aleatorio-para-proteger-cron-jobs

# ============================================
# Feature Flags - Características Opcionales
# ============================================
# Analytics Materialized Views (mejora performance de dashboards)
ENABLE_ANALYTICS_MATERIALIZED_VIEWS=false

# Rotación automática de claves de encriptación
ENCRYPTION_KEY_ROTATION_ENABLED=false

# MongoDB Query Profiling (para desarrollo/staging)
MONGODB_QUERY_PROFILING_ENABLED=true
MONGODB_SLOW_QUERY_THRESHOLD=100

# ============================================
# Seguridad - Configuraciones Avanzadas (Opcional)
# ============================================
# Permitir escaneo de vulnerabilidades en runtime (NO recomendado en producción)
ALLOW_RUNTIME_AUDIT=false

# Permitir creación de backups en runtime (NO recomendado en producción)
ALLOW_RUNTIME_BACKUP=false
